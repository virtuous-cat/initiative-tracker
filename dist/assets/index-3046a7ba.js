var pn=Object.defineProperty;var vn=(t,e,n)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(vn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ce(){}function jt(t){return t()}function kt(){return Object.create(null)}function le(t){t.forEach(jt)}function Zt(t){return typeof t=="function"}function Ht(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function gn(t){return Object.keys(t).length===0}function r(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function Ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function y(){return H(" ")}function Wt(){return H("")}function T(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ne(t){return t===""?null:+t}function mn(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function ae(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fe(t){const e=t.querySelector(":checked");return e&&e.__value}function we(t,e,n){t.classList.toggle(e,!!n)}function bn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Me;function De(t){Me=t}function Gt(){if(!Me)throw new Error("Function called outside component initialization");return Me}function kn(t){Gt().$$.on_mount.push(t)}function wn(){const t=Gt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=bn(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const ke=[],Qe=[];let Se=[];const Ye=[],Sn=Promise.resolve();let $e=!1;function En(){$e||($e=!0,Sn.then(Xt))}function te(t){Se.push(t)}function An(t){Ye.push(t)}const Ke=new Set;let me=0;function Xt(){if(me!==0)return;const t=Me;do{try{for(;me<ke.length;){const e=ke[me];me++,De(e),Cn(e.$$)}}catch(e){throw ke.length=0,me=0,e}for(De(null),ke.length=0,me=0;Qe.length;)Qe.pop()();for(let e=0;e<Se.length;e+=1){const n=Se[e];Ke.has(n)||(Ke.add(n),n())}Se.length=0}while(ke.length);for(;Ye.length;)Ye.pop()();$e=!1,Ke.clear(),De(t)}function Cn(t){if(t.fragment!==null){t.update(),le(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(te)}}function zn(t){const e=[],n=[];Se.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Se=e}const Pe=new Set;let he;function Nn(){he={r:0,c:[],p:he}}function yn(){he.r||le(he.c),he=he.p}function Ee(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function xe(t,e,n,l){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),he.c.push(()=>{Pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function qt(t,e){t.d(1),e.delete(t.key)}function Jt(t,e,n,l,i,s,o,d,w,b,S,N){let E=t.length,I=s.length,h=E;const g={};for(;h--;)g[t[h].key]=h;const _=[],z=new Map,D=new Map,A=[];for(h=I;h--;){const k=N(i,s,h),O=n(k);let B=o.get(O);B?l&&A.push(()=>B.p(k,e)):(B=b(O,k),B.c()),z.set(O,_[h]=B),O in g&&D.set(O,Math.abs(h-g[O]))}const M=new Set,p=new Set;function v(k){Ee(k,1),k.m(d,S),o.set(k.key,k),S=k.first,I--}for(;E&&I;){const k=_[I-1],O=t[E-1],B=k.key,G=O.key;k===O?(S=k.first,E--,I--):z.has(G)?!o.has(B)||M.has(B)?v(k):p.has(G)?E--:D.get(B)>D.get(G)?(p.add(B),v(k)):(M.add(G),E--):(w(O,o),E--)}for(;E--;){const k=t[E];z.has(k.key)||w(k,o)}for(;I;)v(_[I-1]);return le(A),_}function In(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function Dn(t){t&&t.c()}function Vt(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),te(()=>{const s=t.$$.on_mount.map(jt).filter(Zt);t.$$.on_destroy?t.$$.on_destroy.push(...s):le(s),t.$$.on_mount=[]}),i.forEach(te)}function Kt(t,e){const n=t.$$;n.fragment!==null&&(zn(n.after_update),le(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),En(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qt(t,e,n,l,i,s,o,d=[-1]){const w=Me;De(t);const b=t.$$={fragment:null,ctx:[],props:s,update:ce,not_equal:i,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(w?w.$$.context:[])),callbacks:kt(),dirty:d,skip_bound:!1,root:e.target||w.$$.root};o&&o(b.root);let S=!1;if(b.ctx=n?n(t,e.props||{},(N,E,...I)=>{const h=I.length?I[0]:E;return b.ctx&&i(b.ctx[N],b.ctx[N]=h)&&(!b.skip_bound&&b.bound[N]&&b.bound[N](h),S&&Mn(t,N)),E}):[],b.update(),S=!0,le(b.before_update),b.fragment=l?l(b.ctx):!1,e.target){if(e.hydrate){const N=mn(e.target);b.fragment&&b.fragment.l(N),N.forEach(L)}else b.fragment&&b.fragment.c();e.intro&&Ee(t.$$.fragment),Vt(t,e.target,e.anchor),Xt()}De(w)}class Yt{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){Kt(this,1),this.$destroy=ce}$on(e,n){if(!Zt(n))return ce;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!gn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rn);const ue={NONE:"--",D4:"d4",D6:"d6",D8:"d8",D10:"d10",D12:"d12"},U=9007199254740992,Ie=U-1,Ue=-1>>>0,$=Ue+1,je=$/2,Re=1<<21,_e=Re-1;function lt(t){return t.next()|0}function oe(t,e){return e===0?t:n=>t(n)+e}function et(t){const e=t.next()|0,n=t.next()>>>0;return(e&_e)*$+n+(e&Re?-U:0)}function $t(t){for(;;){const e=t.next()|0;if(e&4194304){if((e&8388607)===4194304&&!(t.next()|0))return U}else{const n=t.next()>>>0;return(e&_e)*$+n+(e&Re?-U:0)}}}function xt(t){return t.next()>>>0}function He(t){const e=t.next()&_e,n=t.next()>>>0;return e*$+n}function it(t){for(;;){const e=t.next()|0;if(e&Re){if(!(e&_e)&&!(t.next()|0))return U}else{const n=t.next()>>>0;return(e&_e)*$+n}}}function en(t){return(t+1&t)===0}function On(t){return e=>e.next()&t}function Tn(t){const e=t+1,n=e*Math.floor($/e);return l=>{let i=0;do i=l.next()>>>0;while(i>=n);return i%e}}function Bn(t){return en(t)?On(t):Tn(t)}function Ln(t){return(t|0)===0}function Fn(t){return e=>{const n=e.next()&t,l=e.next()>>>0;return n*$+l}}function Pn(t){const e=t*Math.floor(U/t);return n=>{let l=0;do{const i=n.next()&_e,s=n.next()>>>0;l=i*$+s}while(l>=e);return l%t}}function Un(t){const e=t+1;if(Ln(e)){const n=(e/$|0)-1;if(en(n))return Fn(n)}return Pn(e)}function wt(t,e){return n=>{let l=0;do{const i=n.next()|0,s=n.next()>>>0;l=(i&_e)*$+s+(i&Re?-U:0)}while(l<t||l>e);return l}}function pe(t,e){if(t=Math.floor(t),e=Math.floor(e),t<-U||!isFinite(t))throw new RangeError(`Expected min to be at least ${-U}`);if(e>U||!isFinite(e))throw new RangeError(`Expected max to be at most ${U}`);const n=e-t;return n<=0||!isFinite(n)?()=>t:n===Ue?t===0?xt:oe(lt,t+je):n<Ue?oe(Bn(n),t):n===Ie?oe(He,t):n<Ie?oe(Un(n),t):e-1-t===Ie?oe(it,t):t===-U&&e===U?$t:t===-U&&e===Ie?et:t===-Ie&&e===U?oe(et,1):e===U?oe(wt(t-1,e-1),1):wt(t,e)}function jn(t){return(t.next()&1)===1}function tt(t,e){return n=>t(n)<e}function Zn(t){if(t<=0)return()=>!1;if(t>=1)return()=>!0;{const e=t*$;return e%1===0?tt(lt,e-je|0):tt(He,Math.round(t*U))}}function Hn(t,e){return e==null?t==null?jn:Zn(t):t<=0?()=>!1:t>=e?()=>!0:tt(pe(0,e-1),t)}function Wn(t,e){const n=pe(+t,+e);return l=>new Date(n(l))}function tn(t){return pe(1,t)}function Gn(t,e){const n=tn(t);return l=>{const i=[];for(let s=0;s<e;++s)i.push(n(l));return i}}const Xn="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";function st(t=Xn){const e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");const n=pe(0,e-1);return(l,i)=>{let s="";for(let o=0;o<i;++o){const d=n(l);s+=t.charAt(d)}return s}}const nn="0123456789abcdef",qn=st(nn),Jn=st(nn.toUpperCase());function Vn(t){return t?Jn:qn}function St(t,e){return t<0?Math.max(t+e,0):Math.min(t,e)}function Et(t){const e=+t;return e<0?Math.ceil(e):Math.floor(e)}function Kn(t,e,n,l){const i=e.length;if(i===0)throw new RangeError("Cannot pick from an empty array");const s=n==null?0:St(Et(n),i),o=l===void 0?i:St(Et(l),i);if(s>=o)throw new RangeError(`Cannot pick between bounds ${s} and ${o}`);const d=pe(s,o-1);return e[d(t)]}function Qn(t,e){return e===1?t:e===0?()=>0:n=>t(n)*e}function ln(t){return He(t)/U}function sn(t){return it(t)/U}function Yn(t,e,n=!1){if(isFinite(t)){if(!isFinite(e))throw new RangeError("Expected max to be a finite number")}else throw new RangeError("Expected min to be a finite number");return oe(Qn(n?sn:ln,e-t),t)}const $n=Array.prototype.slice;function nt(t,e,n=0){const l=e.length;if(l)for(let i=l-1>>>0;i>n;--i){const o=pe(0,i)(t);if(i!==o){const d=e[i];e[i]=e[o],e[o]=d}}return e}function xn(t,e,n){if(n<0||n>e.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(n===0)return[];const l=$n.call(e),i=l.length;if(i===n)return nt(t,l,0);const s=i-n;return nt(t,l,s-1).slice(s)}const el=(()=>{try{if("x".repeat(3)==="xxx")return(t,e)=>t.repeat(e)}catch{}return(t,e)=>{let n="";for(;e>0;)e&1&&(n+=t),e>>=1,t+=t;return n}})();function be(t,e){return el("0",e-t.length)+t}function tl(t){const e=t.next()>>>0,n=t.next()|0,l=t.next()|0,i=t.next()>>>0;return be(e.toString(16),8)+"-"+be((n&65535).toString(16),4)+"-"+be((n>>4&4095|16384).toString(16),4)+"-"+be((l&16383|32768).toString(16),4)+"-"+be((l>>4&65535).toString(16),4)+be(i.toString(16),8)}const nl={next(){return Math.random()*$|0}};class ll{constructor(e=nl){this.engine=e}int32(){return lt(this.engine)}uint32(){return xt(this.engine)}uint53(){return He(this.engine)}uint53Full(){return it(this.engine)}int53(){return et(this.engine)}int53Full(){return $t(this.engine)}integer(e,n){return pe(e,n)(this.engine)}realZeroToOneInclusive(){return sn(this.engine)}realZeroToOneExclusive(){return ln(this.engine)}real(e,n,l=!1){return Yn(e,n,l)(this.engine)}bool(e,n){return Hn(e,n)(this.engine)}pick(e,n,l){return Kn(this.engine,e,n,l)}shuffle(e){return nt(this.engine,e)}sample(e,n){return xn(this.engine,e,n)}die(e){return tn(e)(this.engine)}dice(e,n){return Gn(e,n)(this.engine)}uuid4(){return tl(this.engine)}string(e,n){return st(n)(this.engine,e)}hex(e,n){return Vn(n)(this.engine,e)}date(e,n){return Wn(e,n)(this.engine)}}(()=>{try{const t=new ArrayBuffer(4),e=new Int32Array(t);if(e[0]=je,e[0]===-je)return Int32Array}catch{}return Array})();(()=>{try{if(Math.imul(Ue,5)===-5)return Math.imul}catch{}const t=65535;return(e,n)=>{const l=e>>>16&t,i=e&t,s=n>>>16&t,o=n&t;return i*o+(l*o+i*s<<16>>>0)|0}})();function At(t,e,n){const l=t.slice();return l[28]=e[n],l[29]=e,l[30]=n,l}function Ct(t,e,n){const l=t.slice();return l[31]=e[n],l[32]=e,l[33]=n,l}function zt(t,e,n){const l=t.slice();return l[34]=e[n],l}function Nt(t,e,n){const l=t.slice();return l[34]=e[n],l}function yt(t){let e,n,l;return{c(){e=f("a"),n=H("Go"),c(e,"href",l=t[28].info),c(e,"target","_blank"),c(e,"class","btn svelte-3duvpz")},m(i,s){P(i,e,s),r(e,n)},p(i,s){s[0]&1&&l!==(l=i[28].info)&&c(e,"href",l)},d(i){i&&L(e)}}}function It(t){let e,n=t[34]+"",l;return{c(){e=f("option"),l=H(n),e.__value=t[34],Z(e,e.__value),c(e,"class","svelte-3duvpz")},m(i,s){P(i,e,s),r(e,l)},p:ce,d(i){i&&L(e)}}}function Dt(t){let e,n=Y(t[28].extraAttacks),l=[];for(let i=0;i<n.length;i+=1)l[i]=Rt(Ct(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Wt()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);P(i,e,s)},p(i,s){if(s[0]&17){n=Y(i[28].extraAttacks);let o;for(o=0;o<n.length;o+=1){const d=Ct(i,n,o);l[o]?l[o].p(d,s):(l[o]=Rt(d),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&L(e),Ze(l,i)}}}function Mt(t){let e,n=t[34]+"",l;return{c(){e=f("option"),l=H(n),e.__value=t[34],Z(e,e.__value),c(e,"class","svelte-3duvpz")},m(i,s){P(i,e,s),r(e,l)},p:ce,d(i){i&&L(e)}}}function Rt(t){let e,n,l,i,s,o,d,w,b,S,N,E,I,h,g=Y(Object.values(ue)),_=[];for(let M=0;M<g.length;M+=1)_[M]=Mt(zt(t,g,M));function z(){t[21].call(s,t[32],t[33])}function D(){t[22].call(w,t[32],t[33])}function A(){return t[23](t[31],t[28],t[32],t[33])}return{c(){e=f("tr"),n=f("td"),l=y(),i=f("td"),s=f("select");for(let M=0;M<_.length;M+=1)_[M].c();o=y(),d=f("td"),w=f("input"),b=y(),S=f("td"),N=f("button"),N.textContent="Roll Initiative",E=y(),c(n,"class","empty svelte-3duvpz"),c(s,"class","svelte-3duvpz"),t[31].initiativeDie===void 0&&te(z),c(i,"class","svelte-3duvpz"),c(w,"type","number"),c(w,"min","0"),c(w,"max","10"),c(w,"class","svelte-3duvpz"),c(d,"class","svelte-3duvpz"),c(N,"class","highlighted svelte-3duvpz"),c(S,"colspan","5"),c(S,"class","svelte-3duvpz"),c(e,"class","extra-attacks svelte-3duvpz"),we(e,"dead",!t[28].alive)},m(M,p){P(M,e,p),r(e,n),r(e,l),r(e,i),r(i,s);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(s,null);ae(s,t[31].initiativeDie,!0),r(e,o),r(e,d),r(d,w),Z(w,t[31].initiativeSeg),r(e,b),r(e,S),r(S,N),r(e,E),I||(h=[T(s,"change",z),T(w,"input",D),T(N,"click",A)],I=!0)},p(M,p){if(t=M,p&0){g=Y(Object.values(ue));let v;for(v=0;v<g.length;v+=1){const k=zt(t,g,v);_[v]?_[v].p(k,p):(_[v]=Mt(k),_[v].c(),_[v].m(s,null))}for(;v<_.length;v+=1)_[v].d(1);_.length=g.length}p[0]&1&&ae(s,t[31].initiativeDie),p[0]&1&&ne(w.value)!==t[31].initiativeSeg&&Z(w,t[31].initiativeSeg),p[0]&1&&we(e,"dead",!t[28].alive)},d(M){M&&L(e),Ze(_,M),I=!1,le(h)}}}function Ot(t,e){var vt,gt;let n,l,i=e[28].number+"",s,o,d,w,b,S,N,E=(vt=e[28].info)==null?void 0:vt.startsWith("http"),I,h,g,_,z,D,A,M,p,v,k,O,B,G,j,ie,fe,x,a,u,m,C,X,Oe,ve,Te,V,re=e[28].alive?"Mark Dead":"Mark Alive",We,rt,Ce,Ge,K,Xe,ot,Be,se,ut,Le,ee,ct,ze,Ne,qe,ye,Je,at;function ft(){e[7].call(d,e[29],e[30])}function dt(){e[8].call(S,e[29],e[30])}let q=E&&yt(e);function ht(){e[9].call(h,e[29],e[30])}function _t(){e[10].call(_,e[29],e[30])}function rn(){e[11].call(A,e[29],e[30])}function on(){e[12].call(v,e[29],e[30])}function un(){e[13].call(B,e[29],e[30])}function cn(){return e[14](e[28],e[29],e[30])}function an(){return e[15](e[28])}function fn(){return e[16](e[28],e[29],e[30])}function dn(){return e[17](e[28])}let ge=Y(Object.values(ue)),W=[];for(let F=0;F<ge.length;F+=1)W[F]=It(Nt(e,ge,F));function pt(){e[18].call(se,e[29],e[30])}function hn(){e[19].call(ee,e[29],e[30])}function _n(){return e[20](e[28],e[29],e[30])}let J=((gt=e[28].extraAttacks)==null?void 0:gt.length)&&Dt(e);return{key:t,first:null,c(){n=f("tr"),l=f("td"),s=H(i),o=y(),d=f("td"),w=y(),b=f("td"),S=f("div"),N=y(),q&&q.c(),I=y(),h=f("td"),g=y(),_=f("td"),z=y(),D=f("td"),A=f("input"),M=y(),p=f("td"),v=f("input"),k=y(),O=f("td"),B=f("input"),G=y(),j=f("tr"),ie=f("th"),fe=y(),x=f("th"),x.textContent="Initiative Die",a=y(),u=f("th"),u.textContent="Initiative Segment",m=y(),C=f("td"),X=f("button"),X.textContent="Add Split Initiative Attack",Oe=y(),ve=f("button"),ve.textContent="Delete",Te=y(),V=f("button"),We=H(re),rt=y(),Ce=f("button"),Ce.textContent="Copy Monster",Ge=y(),K=f("tr"),Xe=f("td"),ot=y(),Be=f("td"),se=f("select");for(let F=0;F<W.length;F+=1)W[F].c();ut=y(),Le=f("td"),ee=f("input"),ct=y(),ze=f("td"),Ne=f("button"),Ne.textContent="Roll Initiative",qe=y(),J&&J.c(),ye=Wt(),c(l,"class","svelte-3duvpz"),c(d,"contenteditable",""),c(d,"class","svelte-3duvpz"),e[28].name===void 0&&te(ft),c(S,"contenteditable",""),c(S,"class","svelte-3duvpz"),e[28].info===void 0&&te(dt),c(b,"class","info svelte-3duvpz"),c(h,"contenteditable",""),c(h,"class","svelte-3duvpz"),e[28].target===void 0&&te(ht),c(_,"contenteditable",""),c(_,"class","svelte-3duvpz"),e[28].status===void 0&&te(_t),c(A,"type","number"),c(A,"class","svelte-3duvpz"),c(D,"class","svelte-3duvpz"),c(v,"type","number"),c(v,"class","svelte-3duvpz"),c(p,"class","svelte-3duvpz"),c(B,"type","number"),c(B,"class","svelte-3duvpz"),c(O,"class","svelte-3duvpz"),c(n,"class","monster svelte-3duvpz"),we(n,"dead",!e[28].alive),c(ie,"class","empty svelte-3duvpz"),c(x,"class","svelte-3duvpz"),c(u,"class","svelte-3duvpz"),c(X,"class","svelte-3duvpz"),c(ve,"class","svelte-3duvpz"),c(V,"class","svelte-3duvpz"),c(Ce,"class","svelte-3duvpz"),c(C,"colspan","5"),c(C,"class","btn-td svelte-3duvpz"),c(Xe,"class","empty svelte-3duvpz"),c(se,"class","svelte-3duvpz"),e[28].initiativeDie===void 0&&te(pt),c(Be,"class","svelte-3duvpz"),c(ee,"type","number"),c(ee,"min","0"),c(ee,"max","10"),c(ee,"class","svelte-3duvpz"),c(Le,"class","svelte-3duvpz"),c(Ne,"class","highlighted svelte-3duvpz"),c(ze,"colspan","5"),c(ze,"class","svelte-3duvpz"),c(K,"class","base-attacks svelte-3duvpz"),we(K,"dead",!e[28].alive),this.first=n},m(F,R){P(F,n,R),r(n,l),r(l,s),r(n,o),r(n,d),e[28].name!==void 0&&(d.textContent=e[28].name),r(n,w),r(n,b),r(b,S),e[28].info!==void 0&&(S.textContent=e[28].info),r(b,N),q&&q.m(b,null),r(n,I),r(n,h),e[28].target!==void 0&&(h.textContent=e[28].target),r(n,g),r(n,_),e[28].status!==void 0&&(_.textContent=e[28].status),r(n,z),r(n,D),r(D,A),Z(A,e[28].hp),r(n,M),r(n,p),r(p,v),Z(v,e[28].ac),r(n,k),r(n,O),r(O,B),Z(B,e[28].dexBonus),P(F,G,R),P(F,j,R),r(j,ie),r(j,fe),r(j,x),r(j,a),r(j,u),r(j,m),r(j,C),r(C,X),r(C,Oe),r(C,ve),r(C,Te),r(C,V),r(V,We),r(C,rt),r(C,Ce),P(F,Ge,R),P(F,K,R),r(K,Xe),r(K,ot),r(K,Be),r(Be,se);for(let de=0;de<W.length;de+=1)W[de]&&W[de].m(se,null);ae(se,e[28].initiativeDie,!0),r(K,ut),r(K,Le),r(Le,ee),Z(ee,e[28].initiativeSeg),r(K,ct),r(K,ze),r(ze,Ne),P(F,qe,R),J&&J.m(F,R),P(F,ye,R),Je||(at=[T(d,"input",ft),T(S,"input",dt),T(h,"input",ht),T(_,"input",_t),T(A,"input",rn),T(v,"input",on),T(B,"input",un),T(X,"click",cn),T(ve,"click",an),T(V,"click",fn),T(Ce,"click",dn),T(se,"change",pt),T(ee,"input",hn),T(Ne,"click",_n)],Je=!0)},p(F,R){var de,mt;if(e=F,R[0]&1&&i!==(i=e[28].number+"")&&Ae(s,i),R[0]&1&&e[28].name!==d.textContent&&(d.textContent=e[28].name),R[0]&1&&e[28].info!==S.textContent&&(S.textContent=e[28].info),R[0]&1&&(E=(de=e[28].info)==null?void 0:de.startsWith("http")),E?q?q.p(e,R):(q=yt(e),q.c(),q.m(b,null)):q&&(q.d(1),q=null),R[0]&1&&e[28].target!==h.textContent&&(h.textContent=e[28].target),R[0]&1&&e[28].status!==_.textContent&&(_.textContent=e[28].status),R[0]&1&&ne(A.value)!==e[28].hp&&Z(A,e[28].hp),R[0]&1&&ne(v.value)!==e[28].ac&&Z(v,e[28].ac),R[0]&1&&ne(B.value)!==e[28].dexBonus&&Z(B,e[28].dexBonus),R[0]&1&&we(n,"dead",!e[28].alive),R[0]&1&&re!==(re=e[28].alive?"Mark Dead":"Mark Alive")&&Ae(We,re),R&0){ge=Y(Object.values(ue));let Q;for(Q=0;Q<ge.length;Q+=1){const bt=Nt(e,ge,Q);W[Q]?W[Q].p(bt,R):(W[Q]=It(bt),W[Q].c(),W[Q].m(se,null))}for(;Q<W.length;Q+=1)W[Q].d(1);W.length=ge.length}R[0]&1&&ae(se,e[28].initiativeDie),R[0]&1&&ne(ee.value)!==e[28].initiativeSeg&&Z(ee,e[28].initiativeSeg),R[0]&1&&we(K,"dead",!e[28].alive),(mt=e[28].extraAttacks)!=null&&mt.length?J?J.p(e,R):(J=Dt(e),J.c(),J.m(ye.parentNode,ye)):J&&(J.d(1),J=null)},d(F){F&&(L(n),L(G),L(j),L(Ge),L(K),L(qe),L(ye)),q&&q.d(),Ze(W,F),J&&J.d(F),Je=!1,le(at)}}}function Tt(t){let e,n,l;return{c(){e=f("button"),e.textContent="Next Round",c(e,"class","next highlighted svelte-3duvpz")},m(i,s){P(i,e,s),n||(l=T(e,"click",t[26]),n=!0)},p:ce,d(i){i&&L(e),n=!1,l()}}}function il(t){let e,n,l,i=t[0].roundNumber+"",s,o,d,w,b,S,N,E,I,h,g,_,z,D=[],A=new Map,M,p,v,k,O,B,G,j,ie,fe,x=Y(t[0].monsters);const a=m=>m[28].number;for(let m=0;m<x.length;m+=1){let C=At(t,x,m),X=a(C);A.set(X,D[m]=Ot(X,C))}let u=t[1]&&Tt(t);return{c(){e=f("section"),n=f("h2"),l=H("Round "),s=H(i),o=y(),d=f("label"),w=H("Sort by: "),b=f("select"),S=f("option"),S.textContent="Monster #",N=f("option"),N.textContent="Name",E=f("option"),E.textContent="Earliest Initiative Segment",I=y(),h=f("table"),g=f("thead"),g.innerHTML='<tr><th class="svelte-3duvpz">Monster #</th> <th class="svelte-3duvpz">Name</th> <th class="svelte-3duvpz">Info</th> <th class="svelte-3duvpz">Target</th> <th class="svelte-3duvpz">Status</th> <th class="svelte-3duvpz">HP</th> <th class="svelte-3duvpz">AC</th> <th class="svelte-3duvpz">Dex Bonus</th></tr>',_=y(),z=f("tbody");for(let m=0;m<D.length;m+=1)D[m].c();M=y(),p=f("div"),v=f("button"),v.textContent="Add New Monster",k=y(),O=f("button"),O.textContent="Roll All Initiatives",B=y(),u&&u.c(),G=y(),j=f("hr"),S.__value="number",Z(S,S.__value),N.__value="name",Z(N,N.__value),E.__value="seg",Z(E,E.__value),t[2]===void 0&&te(()=>t[5].call(b)),c(g,"class","svelte-3duvpz"),c(h,"class","svelte-3duvpz"),c(O,"class","highlighted"),c(p,"class","buttons svelte-3duvpz"),c(e,"class","round"),c(j,"class","svelte-3duvpz")},m(m,C){P(m,e,C),r(e,n),r(n,l),r(n,s),r(e,o),r(e,d),r(d,w),r(d,b),r(b,S),r(b,N),r(b,E),ae(b,t[2],!0),r(e,I),r(e,h),r(h,g),r(h,_),r(h,z);for(let X=0;X<D.length;X+=1)D[X]&&D[X].m(z,null);r(e,M),r(e,p),r(p,v),r(p,k),r(p,O),r(p,B),u&&u.m(p,null),P(m,G,C),P(m,j,C),ie||(fe=[T(b,"change",t[5]),T(b,"change",t[6]),T(v,"click",t[24]),T(O,"click",t[25])],ie=!0)},p(m,C){C[0]&1&&i!==(i=m[0].roundNumber+"")&&Ae(s,i),C[0]&4&&ae(b,m[2]),C[0]&17&&(x=Y(m[0].monsters),D=Jt(D,C,a,1,m,x,A,z,qt,Ot,null,At)),m[1]?u?u.p(m,C):(u=Tt(m),u.c(),u.m(p,null)):u&&(u.d(1),u=null)},i:ce,o:ce,d(m){m&&(L(e),L(G),L(j));for(let C=0;C<D.length;C+=1)D[C].d();u&&u.d(),ie=!1,le(fe)}}}function sl(t,e,n){let{round:l}=e,{current:i}=e,s;const o=wn(),d=new ll;function w({initiativeDie:a,dexBonus:u}){if(a===ue.NONE)return;const C=d.die(parseInt(a.slice(1)))-u;return C<0?0:C>10?10:C}function b(){s=Fe(this),n(2,s)}const S=()=>{switch(s){case"number":n(0,l.monsters=l.monsters.sort((a,u)=>a.number-u.number),l);break;case"name":n(0,l.monsters=l.monsters.sort((a,u)=>{const m=a.name.toUpperCase(),C=u.name.toUpperCase();return m<C?-1:m>C?1:0}),l);break;case"seg":n(0,l.monsters=l.monsters.sort((a,u)=>{var m,C;if((m=a.extraAttacks)!=null&&m.length||(C=u.extraAttacks)!=null&&C.length){const Oe=[a.initiativeSeg,...a.extraAttacks.map(V=>V.initiativeSeg)].sort((V,re)=>V-re)[0],Te=[u.initiativeSeg,...u.extraAttacks.map(V=>V.initiativeSeg)].sort((V,re)=>V-re)[0];return Oe-Te}return a.initiativeSeg-u.initiativeSeg}),l);break}};function N(a,u){a[u].name=this.textContent,n(0,l)}function E(a,u){a[u].info=this.textContent,n(0,l)}function I(a,u){a[u].target=this.textContent,n(0,l)}function h(a,u){a[u].status=this.textContent,n(0,l)}function g(a,u){a[u].hp=ne(this.value),n(0,l)}function _(a,u){a[u].ac=ne(this.value),n(0,l)}function z(a,u){a[u].dexBonus=ne(this.value),n(0,l)}const D=(a,u,m)=>{n(0,u[m].extraAttacks=[...a.extraAttacks,{initiativeDie:ue.NONE}],l)},A=a=>{n(0,l.monsters=l.monsters.filter(({number:u})=>u!==a.number),l)},M=(a,u,m)=>{n(0,u[m].alive=!a.alive,l)},p=a=>{var m;const u={...a,number:l.monsters.length+1,alive:!0,initiativeSeg:void 0,extraAttacks:(m=a.extraAttacks)==null?void 0:m.map(C=>({...C,initiativeSeg:void 0}))};n(0,l.monsters=[...l.monsters,u],l)};function v(a,u){a[u].initiativeDie=Fe(this),n(0,l)}function k(a,u){a[u].initiativeSeg=ne(this.value),n(0,l)}const O=(a,u,m)=>{n(0,u[m].initiativeSeg=w({initiativeDie:a.initiativeDie,dexBonus:a.dexBonus}),l)};function B(a,u){a[u].initiativeDie=Fe(this),n(0,l)}function G(a,u){a[u].initiativeSeg=ne(this.value),n(0,l)}const j=(a,u,m,C)=>{n(0,m[C].initiativeSeg=w({initiativeDie:a.initiativeDie,dexBonus:u.dexBonus}),l)},ie=()=>{const a={number:l.monsters.length+1,alive:!0,name:"",target:"",initiativeDie:ue.NONE,dexBonus:0,extraAttacks:[],status:"",info:""};n(0,l.monsters=[...l.monsters,a],l)},fe=()=>{n(0,l.monsters=l.monsters.map(a=>{var u;return{...a,initiativeSeg:w({initiativeDie:a.initiativeDie,dexBonus:a.dexBonus}),extraAttacks:(u=a.extraAttacks)==null?void 0:u.map(m=>({...m,initiativeSeg:w({initiativeDie:m.initiativeDie,dexBonus:a.dexBonus})}))}}),l)},x=()=>{const a={roundNumber:l.roundNumber+1,monsters:l.monsters.map(u=>({...u,initiativeSeg:void 0,extraAttacks:u.extraAttacks.map(m=>({...m,initiativeSeg:void 0}))})).sort((u,m)=>u.number-m.number)};o("next",a)};return t.$$set=a=>{"round"in a&&n(0,l=a.round),"current"in a&&n(1,i=a.current)},[l,i,s,o,w,b,S,N,E,I,h,g,_,z,D,A,M,p,v,k,O,B,G,j,ie,fe,x]}class rl extends Yt{constructor(e){super(),Qt(this,e,sl,il,Ht,{round:0,current:1},null,[-1,-1])}}function Bt(t,e,n){const l=t.slice();return l[11]=e[n],l[12]=e,l[13]=n,l}function Lt(t,e,n){const l=t.slice();return l[14]=e[n],l}function Ft(t){let e,n,l,i=[],s=new Map,o,d,w,b,S,N,E,I=Y(t[1]);const h=g=>g[14].title;for(let g=0;g<I.length;g+=1){let _=Lt(t,I,g),z=h(_);s.set(z,i[g]=Pt(z,_))}return{c(){e=f("label"),n=H(`Saved Combats:
      `),l=f("select");for(let g=0;g<i.length;g+=1)i[g].c();o=y(),d=f("div"),w=f("button"),w.textContent="Delete",b=y(),S=f("button"),S.textContent="Load Saved Combat",c(l,"class","svelte-14va7df"),t[2]===void 0&&te(()=>t[6].call(l)),c(w,"class","delete"),c(S,"class","load"),c(d,"class","saved-buttons svelte-14va7df")},m(g,_){P(g,e,_),r(e,n),r(e,l);for(let z=0;z<i.length;z+=1)i[z]&&i[z].m(l,null);ae(l,t[2],!0),P(g,o,_),P(g,d,_),r(d,w),r(d,b),r(d,S),N||(E=[T(l,"change",t[6]),T(w,"click",t[7]),T(S,"click",t[8])],N=!0)},p(g,_){_&2&&(I=Y(g[1]),i=Jt(i,_,h,1,g,I,s,l,qt,Pt,null,Lt)),_&6&&ae(l,g[2])},d(g){g&&(L(e),L(o),L(d));for(let _=0;_<i.length;_+=1)i[_].d();N=!1,le(E)}}}function Pt(t,e){let n,l=e[14].title+"",i,s;return{key:t,first:null,c(){n=f("option"),i=H(l),n.__value=s=e[14],Z(n,n.__value),this.first=n},m(o,d){P(o,n,d),r(n,i)},p(o,d){e=o,d&2&&l!==(l=e[14].title+"")&&Ae(i,l),d&2&&s!==(s=e[14])&&(n.__value=s,Z(n,n.__value))},d(o){o&&L(n)}}}function Ut(t){let e,n,l;function i(o){t[9](o,t[11],t[12],t[13])}let s={current:t[11].roundNumber===t[0].currentRoundNumber};return t[11]!==void 0&&(s.round=t[11]),e=new rl({props:s}),Qe.push(()=>In(e,"round",i)),e.$on("next",t[10]),{c(){Dn(e.$$.fragment)},m(o,d){Vt(e,o,d),l=!0},p(o,d){t=o;const w={};d&1&&(w.current=t[11].roundNumber===t[0].currentRoundNumber),!n&&d&1&&(n=!0,w.round=t[11],An(()=>n=!1)),e.$set(w)},i(o){l||(Ee(e.$$.fragment,o),l=!0)},o(o){xe(e.$$.fragment,o),l=!1},d(o){Kt(e,o)}}}function ol(t){let e,n,l,i=t[3]?` - ${t[3]}`:"",s,o,d=t[0].currentRoundNumber+"",w,b,S,N,E,I,h,g,_,z=t[1].length&&Ft(t),D=Y(t[0].roundsData),A=[];for(let p=0;p<D.length;p+=1)A[p]=Ut(Bt(t,D,p));const M=p=>xe(A[p],1,1,()=>{A[p]=null});return{c(){e=f("header"),n=f("h1"),l=H("Initiative Tracker"),s=H(i),o=H(" - Round: "),w=H(d),b=y(),S=f("button"),S.textContent="Save Combat",N=y(),E=f("main"),z&&z.c(),I=y();for(let p=0;p<A.length;p+=1)A[p].c();c(S,"class","save highlighted svelte-14va7df"),c(e,"class","svelte-14va7df")},m(p,v){P(p,e,v),r(e,n),r(n,l),r(n,s),r(n,o),r(n,w),r(e,b),r(e,S),P(p,N,v),P(p,E,v),z&&z.m(E,null),r(E,I);for(let k=0;k<A.length;k+=1)A[k]&&A[k].m(E,null);h=!0,g||(_=T(S,"click",t[5]),g=!0)},p(p,[v]){if((!h||v&8)&&i!==(i=p[3]?` - ${p[3]}`:"")&&Ae(s,i),(!h||v&1)&&d!==(d=p[0].currentRoundNumber+"")&&Ae(w,d),p[1].length?z?z.p(p,v):(z=Ft(p),z.c(),z.m(E,I)):z&&(z.d(1),z=null),v&1){D=Y(p[0].roundsData);let k;for(k=0;k<D.length;k+=1){const O=Bt(p,D,k);A[k]?(A[k].p(O,v),Ee(A[k],1)):(A[k]=Ut(O),A[k].c(),Ee(A[k],1),A[k].m(E,null))}for(Nn(),k=D.length;k<A.length;k+=1)M(k);yn()}},i(p){if(!h){for(let v=0;v<D.length;v+=1)Ee(A[v]);h=!0}},o(p){A=A.filter(Boolean);for(let v=0;v<A.length;v+=1)xe(A[v]);h=!1},d(p){p&&(L(e),L(N),L(E)),z&&z.d(),Ze(A,p),g=!1,_()}}}function ul(t,e,n){let l={currentRoundNumber:1,roundsData:[{roundNumber:1,monsters:[{number:1,alive:!0,name:"",target:"",initiativeDie:ue.NONE,dexBonus:0,extraAttacks:[],status:"",info:""}]}]},i=[],s,o;function d(){const h=[];for(let g=0;g<localStorage.length;g++){if(console.log(localStorage.key(g)),localStorage.key(g)==="admin")continue;const _=JSON.parse(localStorage.getItem(localStorage.key(g)));h.push({title:localStorage.key(g),combat:_})}n(1,i=h)}kn(()=>{d()});const w=()=>{const h=window.prompt("Save As:",o);!h||!h.length||(localStorage.setItem(h,JSON.stringify(l)),n(3,o=h),d(),n(2,s=i.find(g=>g.title===h)))};function b(){s=Fe(this),n(2,s),n(1,i)}const S=()=>{localStorage.removeItem(s.title),d()},N=()=>{n(0,l=s.combat),n(3,o=s.title)};function E(h,g,_,z){_[z]=h,n(0,l)}return[l,i,s,o,d,w,b,S,N,E,h=>{n(0,l.roundsData=[...l.roundsData,h.detail],l),n(0,l.currentRoundNumber=h.detail.roundNumber,l)}]}class cl extends Yt{constructor(e){super(),Qt(this,e,ul,ol,Ht,{})}}new cl({target:document.getElementById("app")});
