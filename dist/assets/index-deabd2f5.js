var gn=Object.defineProperty;var mn=(t,e,n)=>e in t?gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(mn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fe(){}function jt(t){return t()}function kt(){return Object.create(null)}function ie(t){t.forEach(jt)}function Zt(t){return typeof t=="function"}function Ht(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pn(t){return Object.keys(t).length===0}function o(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function F(t){t.parentNode&&t.parentNode.removeChild(t)}function Ze(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function X(t){return document.createTextNode(t)}function A(){return X(" ")}function Wt(){return X("")}function T(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function se(t){return t===""?null:+t}function vn(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e){t.value=e??""}function de(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fe(t){const e=t.querySelector(":checked");return e&&e.__value}function Ne(t,e,n){t.classList.toggle(e,!!n)}function bn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Re;function Me(t){Re=t}function Gt(){if(!Re)throw new Error("Function called outside component initialization");return Re}function kn(t){Gt().$$.on_mount.push(t)}function wn(){const t=Gt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=bn(e,n,{cancelable:l});return i.slice().forEach(r=>{r.call(t,s)}),!s.defaultPrevented}return!0}}const Se=[],Qe=[];let Ae=[];const Ye=[],Sn=Promise.resolve();let xe=!1;function Nn(){xe||(xe=!0,Sn.then(Xt))}function le(t){Ae.push(t)}function An(t){Ye.push(t)}const Ke=new Set;let ke=0;function Xt(){if(ke!==0)return;const t=Re;do{try{for(;ke<Se.length;){const e=Se[ke];ke++,Me(e),Cn(e.$$)}}catch(e){throw Se.length=0,ke=0,e}for(Me(null),Se.length=0,ke=0;Qe.length;)Qe.pop()();for(let e=0;e<Ae.length;e+=1){const n=Ae[e];Ke.has(n)||(Ke.add(n),n())}Ae.length=0}while(Se.length);for(;Ye.length;)Ye.pop()();xe=!1,Ke.clear(),Me(t)}function Cn(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(le)}}function En(t){const e=[],n=[];Ae.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ae=e}const Pe=new Set;let ge;function zn(){ge={r:0,c:[],p:ge}}function yn(){ge.r||ie(ge.c),ge=ge.p}function Ce(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function $e(t,e,n,l){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),ge.c.push(()=>{Pe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ee(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Jt(t,e){t.d(1),e.delete(t.key)}function qt(t,e,n,l,i,s,r,g,m,p,b,C){let w=t.length,z=s.length,S=w;const v={};for(;S--;)v[t[S].key]=S;const a=[],N=new Map,D=new Map,L=[];for(S=z;S--;){const y=C(i,s,S),B=n(y);let I=r.get(B);I?l&&L.push(()=>I.p(y,e)):(I=p(B,y),I.c()),N.set(B,a[S]=I),B in v&&D.set(B,Math.abs(S-v[B]))}const M=new Set,R=new Set;function k(y){Ce(y,1),y.m(g,b),r.set(y.key,y),b=y.first,z--}for(;w&&z;){const y=a[z-1],B=t[w-1],I=y.key,U=B.key;y===B?(b=y.first,w--,z--):N.has(U)?!r.has(I)||M.has(I)?k(y):R.has(U)?w--:D.get(I)>D.get(U)?(R.add(I),k(y)):(M.add(U),w--):(m(B,r),w--)}for(;w--;){const y=t[w];N.has(y.key)||m(y,r)}for(;z;)k(a[z-1]);return ie(L),a}function In(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function Dn(t){t&&t.c()}function Vt(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),le(()=>{const s=t.$$.on_mount.map(jt).filter(Zt);t.$$.on_destroy?t.$$.on_destroy.push(...s):ie(s),t.$$.on_mount=[]}),i.forEach(le)}function Kt(t,e){const n=t.$$;n.fragment!==null&&(En(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mn(t,e){t.$$.dirty[0]===-1&&(Se.push(t),Nn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qt(t,e,n,l,i,s,r,g=[-1]){const m=Re;Me(t);const p=t.$$={fragment:null,ctx:[],props:s,update:fe,not_equal:i,bound:kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(m?m.$$.context:[])),callbacks:kt(),dirty:g,skip_bound:!1,root:e.target||m.$$.root};r&&r(p.root);let b=!1;if(p.ctx=n?n(t,e.props||{},(C,w,...z)=>{const S=z.length?z[0]:w;return p.ctx&&i(p.ctx[C],p.ctx[C]=S)&&(!p.skip_bound&&p.bound[C]&&p.bound[C](S),b&&Mn(t,C)),w}):[],p.update(),b=!0,ie(p.before_update),p.fragment=l?l(p.ctx):!1,e.target){if(e.hydrate){const C=vn(e.target);p.fragment&&p.fragment.l(C),C.forEach(F)}else p.fragment&&p.fragment.c();e.intro&&Ce(t.$$.fragment),Vt(t,e.target,e.anchor),Xt()}Me(m)}class Yt{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){Kt(this,1),this.$destroy=fe}$on(e,n){if(!Zt(n))return fe;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!pn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rn);const ae={NONE:"--",D4:"d4",D6:"d6",D8:"d8",D10:"d10",D12:"d12"},G=9007199254740992,De=G-1,Ue=-1>>>0,te=Ue+1,je=te/2,Oe=1<<21,me=Oe-1;function lt(t){return t.next()|0}function ue(t,e){return e===0?t:n=>t(n)+e}function et(t){const e=t.next()|0,n=t.next()>>>0;return(e&me)*te+n+(e&Oe?-G:0)}function xt(t){for(;;){const e=t.next()|0;if(e&4194304){if((e&8388607)===4194304&&!(t.next()|0))return G}else{const n=t.next()>>>0;return(e&me)*te+n+(e&Oe?-G:0)}}}function $t(t){return t.next()>>>0}function He(t){const e=t.next()&me,n=t.next()>>>0;return e*te+n}function it(t){for(;;){const e=t.next()|0;if(e&Oe){if(!(e&me)&&!(t.next()|0))return G}else{const n=t.next()>>>0;return(e&me)*te+n}}}function en(t){return(t+1&t)===0}function On(t){return e=>e.next()&t}function Tn(t){const e=t+1,n=e*Math.floor(te/e);return l=>{let i=0;do i=l.next()>>>0;while(i>=n);return i%e}}function Ln(t){return en(t)?On(t):Tn(t)}function Bn(t){return(t|0)===0}function Fn(t){return e=>{const n=e.next()&t,l=e.next()>>>0;return n*te+l}}function Pn(t){const e=t*Math.floor(G/t);return n=>{let l=0;do{const i=n.next()&me,s=n.next()>>>0;l=i*te+s}while(l>=e);return l%t}}function Un(t){const e=t+1;if(Bn(e)){const n=(e/te|0)-1;if(en(n))return Fn(n)}return Pn(e)}function wt(t,e){return n=>{let l=0;do{const i=n.next()|0,s=n.next()>>>0;l=(i&me)*te+s+(i&Oe?-G:0)}while(l<t||l>e);return l}}function pe(t,e){if(t=Math.floor(t),e=Math.floor(e),t<-G||!isFinite(t))throw new RangeError(`Expected min to be at least ${-G}`);if(e>G||!isFinite(e))throw new RangeError(`Expected max to be at most ${G}`);const n=e-t;return n<=0||!isFinite(n)?()=>t:n===Ue?t===0?$t:ue(lt,t+je):n<Ue?ue(Ln(n),t):n===De?ue(He,t):n<De?ue(Un(n),t):e-1-t===De?ue(it,t):t===-G&&e===G?xt:t===-G&&e===De?et:t===-De&&e===G?ue(et,1):e===G?ue(wt(t-1,e-1),1):wt(t,e)}function jn(t){return(t.next()&1)===1}function tt(t,e){return n=>t(n)<e}function Zn(t){if(t<=0)return()=>!1;if(t>=1)return()=>!0;{const e=t*te;return e%1===0?tt(lt,e-je|0):tt(He,Math.round(t*G))}}function Hn(t,e){return e==null?t==null?jn:Zn(t):t<=0?()=>!1:t>=e?()=>!0:tt(pe(0,e-1),t)}function Wn(t,e){const n=pe(+t,+e);return l=>new Date(n(l))}function tn(t){return pe(1,t)}function Gn(t,e){const n=tn(t);return l=>{const i=[];for(let s=0;s<e;++s)i.push(n(l));return i}}const Xn="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-";function st(t=Xn){const e=t.length;if(!e)throw new Error("Expected pool not to be an empty string");const n=pe(0,e-1);return(l,i)=>{let s="";for(let r=0;r<i;++r){const g=n(l);s+=t.charAt(g)}return s}}const nn="0123456789abcdef",Jn=st(nn),qn=st(nn.toUpperCase());function Vn(t){return t?qn:Jn}function St(t,e){return t<0?Math.max(t+e,0):Math.min(t,e)}function Nt(t){const e=+t;return e<0?Math.ceil(e):Math.floor(e)}function Kn(t,e,n,l){const i=e.length;if(i===0)throw new RangeError("Cannot pick from an empty array");const s=n==null?0:St(Nt(n),i),r=l===void 0?i:St(Nt(l),i);if(s>=r)throw new RangeError(`Cannot pick between bounds ${s} and ${r}`);const g=pe(s,r-1);return e[g(t)]}function Qn(t,e){return e===1?t:e===0?()=>0:n=>t(n)*e}function ln(t){return He(t)/G}function sn(t){return it(t)/G}function Yn(t,e,n=!1){if(isFinite(t)){if(!isFinite(e))throw new RangeError("Expected max to be a finite number")}else throw new RangeError("Expected min to be a finite number");return ue(Qn(n?sn:ln,e-t),t)}const xn=Array.prototype.slice;function nt(t,e,n=0){const l=e.length;if(l)for(let i=l-1>>>0;i>n;--i){const r=pe(0,i)(t);if(i!==r){const g=e[i];e[i]=e[r],e[r]=g}}return e}function $n(t,e,n){if(n<0||n>e.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(n===0)return[];const l=xn.call(e),i=l.length;if(i===n)return nt(t,l,0);const s=i-n;return nt(t,l,s-1).slice(s)}const el=(()=>{try{if("x".repeat(3)==="xxx")return(t,e)=>t.repeat(e)}catch{}return(t,e)=>{let n="";for(;e>0;)e&1&&(n+=t),e>>=1,t+=t;return n}})();function we(t,e){return el("0",e-t.length)+t}function tl(t){const e=t.next()>>>0,n=t.next()|0,l=t.next()|0,i=t.next()>>>0;return we(e.toString(16),8)+"-"+we((n&65535).toString(16),4)+"-"+we((n>>4&4095|16384).toString(16),4)+"-"+we((l&16383|32768).toString(16),4)+"-"+we((l>>4&65535).toString(16),4)+we(i.toString(16),8)}const nl={next(){return Math.random()*te|0}};class ll{constructor(e=nl){this.engine=e}int32(){return lt(this.engine)}uint32(){return $t(this.engine)}uint53(){return He(this.engine)}uint53Full(){return it(this.engine)}int53(){return et(this.engine)}int53Full(){return xt(this.engine)}integer(e,n){return pe(e,n)(this.engine)}realZeroToOneInclusive(){return sn(this.engine)}realZeroToOneExclusive(){return ln(this.engine)}real(e,n,l=!1){return Yn(e,n,l)(this.engine)}bool(e,n){return Hn(e,n)(this.engine)}pick(e,n,l){return Kn(this.engine,e,n,l)}shuffle(e){return nt(this.engine,e)}sample(e,n){return $n(this.engine,e,n)}die(e){return tn(e)(this.engine)}dice(e,n){return Gn(e,n)(this.engine)}uuid4(){return tl(this.engine)}string(e,n){return st(n)(this.engine,e)}hex(e,n){return Vn(n)(this.engine,e)}date(e,n){return Wn(e,n)(this.engine)}}(()=>{try{const t=new ArrayBuffer(4),e=new Int32Array(t);if(e[0]=je,e[0]===-je)return Int32Array}catch{}return Array})();(()=>{try{if(Math.imul(Ue,5)===-5)return Math.imul}catch{}const t=65535;return(e,n)=>{const l=e>>>16&t,i=e&t,s=n>>>16&t,r=n&t;return i*r+(l*r+i*s<<16>>>0)|0}})();function At(t,e,n){const l=t.slice();return l[28]=e[n],l[29]=e,l[30]=n,l}function Ct(t,e,n){const l=t.slice();return l[31]=e[n],l[32]=e,l[33]=n,l}function Et(t,e,n){const l=t.slice();return l[34]=e[n],l}function zt(t,e,n){const l=t.slice();return l[34]=e[n],l}function yt(t){let e,n,l;return{c(){e=h("a"),n=X("Go"),f(e,"href",l=t[28].info),f(e,"target","_blank"),f(e,"class","btn svelte-zmcd92")},m(i,s){P(i,e,s),o(e,n)},p(i,s){s[0]&1&&l!==(l=i[28].info)&&f(e,"href",l)},d(i){i&&F(e)}}}function It(t){let e,n=t[34]+"",l;return{c(){e=h("option"),l=X(n),e.__value=t[34],J(e,e.__value),f(e,"class","svelte-zmcd92")},m(i,s){P(i,e,s),o(e,l)},p:fe,d(i){i&&F(e)}}}function Dt(t){let e,n=ee(t[28].extraAttacks),l=[];for(let i=0;i<n.length;i+=1)l[i]=Rt(Ct(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Wt()},m(i,s){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,s);P(i,e,s)},p(i,s){if(s[0]&17){n=ee(i[28].extraAttacks);let r;for(r=0;r<n.length;r+=1){const g=Ct(i,n,r);l[r]?l[r].p(g,s):(l[r]=Rt(g),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&F(e),Ze(l,i)}}}function Mt(t){let e,n=t[34]+"",l;return{c(){e=h("option"),l=X(n),e.__value=t[34],J(e,e.__value),f(e,"class","svelte-zmcd92")},m(i,s){P(i,e,s),o(e,l)},p:fe,d(i){i&&F(e)}}}function Rt(t){let e,n,l,i,s,r,g,m,p,b,C,w,z,S,v=ee(Object.values(ae)),a=[];for(let M=0;M<v.length;M+=1)a[M]=Mt(Et(t,v,M));function N(){t[21].call(s,t[32],t[33])}function D(){t[22].call(m,t[32],t[33])}function L(){return t[23](t[31],t[28],t[32],t[33])}return{c(){e=h("tr"),n=h("td"),l=A(),i=h("td"),s=h("select");for(let M=0;M<a.length;M+=1)a[M].c();r=A(),g=h("td"),m=h("input"),p=A(),b=h("td"),C=h("button"),C.textContent="Roll Initiative",w=A(),f(n,"class","empty svelte-zmcd92"),f(s,"class","svelte-zmcd92"),t[31].initiativeDie===void 0&&le(N),f(i,"class","svelte-zmcd92"),f(m,"type","number"),f(m,"min","0"),f(m,"max","10"),f(m,"class","svelte-zmcd92"),f(g,"class","svelte-zmcd92"),f(C,"class","highlighted svelte-zmcd92"),f(b,"colspan","5"),f(b,"class","svelte-zmcd92"),f(e,"class","extra-attacks svelte-zmcd92"),Ne(e,"dead",!t[28].alive)},m(M,R){P(M,e,R),o(e,n),o(e,l),o(e,i),o(i,s);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(s,null);de(s,t[31].initiativeDie,!0),o(e,r),o(e,g),o(g,m),J(m,t[31].initiativeSeg),o(e,p),o(e,b),o(b,C),o(e,w),z||(S=[T(s,"change",N),T(m,"input",D),T(C,"click",L)],z=!0)},p(M,R){if(t=M,R&0){v=ee(Object.values(ae));let k;for(k=0;k<v.length;k+=1){const y=Et(t,v,k);a[k]?a[k].p(y,R):(a[k]=Mt(y),a[k].c(),a[k].m(s,null))}for(;k<a.length;k+=1)a[k].d(1);a.length=v.length}R[0]&1&&de(s,t[31].initiativeDie),R[0]&1&&se(m.value)!==t[31].initiativeSeg&&J(m,t[31].initiativeSeg),R[0]&1&&Ne(e,"dead",!t[28].alive)},d(M){M&&F(e),Ze(a,M),z=!1,ie(S)}}}function Ot(t,e){var mt,pt;let n,l,i=e[28].number+"",s,r,g,m,p,b,C,w=(mt=e[28].info)==null?void 0:mt.startsWith("http"),z,S,v,a,N,D,L,M,R,k,y,B,I,U,H,x,Z,W,u,d,c,_,E,he,ve,Te,Q,re=e[28].alive?"Mark Dead":"Mark Alive",We,ot,Ee,Ge,Y,Xe,rt,Le,oe,ut,Be,ne,ct,ze,ye,Je,Ie,qe,at;function ft(){e[7].call(g,e[29],e[30])}function dt(){e[8].call(b,e[29],e[30])}let V=w&&yt(e);function ht(){e[9].call(S,e[29],e[30])}function _t(){e[10].call(a,e[29],e[30])}function on(){e[11].call(L,e[29],e[30])}function rn(){e[12].call(k,e[29],e[30])}function un(){e[13].call(I,e[29],e[30])}function cn(){return e[14](e[28],e[29],e[30])}function an(){return e[15](e[28])}function fn(){return e[16](e[28],e[29],e[30])}function dn(){return e[17](e[28])}let be=ee(Object.values(ae)),q=[];for(let j=0;j<be.length;j+=1)q[j]=It(zt(e,be,j));function gt(){e[18].call(oe,e[29],e[30])}function hn(){e[19].call(ne,e[29],e[30])}function _n(){return e[20](e[28],e[29],e[30])}let K=((pt=e[28].extraAttacks)==null?void 0:pt.length)&&Dt(e);return{key:t,first:null,c(){n=h("tr"),l=h("td"),s=X(i),r=A(),g=h("td"),m=A(),p=h("td"),b=h("div"),C=A(),V&&V.c(),z=A(),S=h("td"),v=A(),a=h("td"),N=A(),D=h("td"),L=h("input"),M=A(),R=h("td"),k=h("input"),y=A(),B=h("td"),I=h("input"),U=A(),H=h("tr"),x=h("th"),Z=A(),W=h("th"),W.textContent="Initiative Die",u=A(),d=h("th"),d.textContent="Initiative Segment",c=A(),_=h("td"),E=h("button"),E.textContent="Add Split Initiative Attack",he=A(),ve=h("button"),ve.textContent="Delete",Te=A(),Q=h("button"),We=X(re),ot=A(),Ee=h("button"),Ee.textContent="Copy Monster",Ge=A(),Y=h("tr"),Xe=h("td"),rt=A(),Le=h("td"),oe=h("select");for(let j=0;j<q.length;j+=1)q[j].c();ut=A(),Be=h("td"),ne=h("input"),ct=A(),ze=h("td"),ye=h("button"),ye.textContent="Roll Initiative",Je=A(),K&&K.c(),Ie=Wt(),f(l,"class","svelte-zmcd92"),f(g,"contenteditable",""),f(g,"class","svelte-zmcd92"),e[28].name===void 0&&le(ft),f(b,"contenteditable",""),f(b,"class","svelte-zmcd92"),e[28].info===void 0&&le(dt),f(p,"class","info svelte-zmcd92"),f(S,"contenteditable",""),f(S,"class","svelte-zmcd92"),e[28].target===void 0&&le(ht),f(a,"contenteditable",""),f(a,"class","svelte-zmcd92"),e[28].status===void 0&&le(_t),f(L,"type","number"),f(L,"class","svelte-zmcd92"),f(D,"class","svelte-zmcd92"),f(k,"type","number"),f(k,"class","svelte-zmcd92"),f(R,"class","svelte-zmcd92"),f(I,"type","number"),f(I,"class","svelte-zmcd92"),f(B,"class","svelte-zmcd92"),f(n,"class","monster svelte-zmcd92"),Ne(n,"dead",!e[28].alive),f(x,"class","empty svelte-zmcd92"),f(W,"class","svelte-zmcd92"),f(d,"class","svelte-zmcd92"),f(E,"class","svelte-zmcd92"),f(ve,"class","svelte-zmcd92"),f(Q,"class","svelte-zmcd92"),f(Ee,"class","svelte-zmcd92"),f(_,"colspan","5"),f(_,"class","btn-td svelte-zmcd92"),f(Xe,"class","empty svelte-zmcd92"),f(oe,"class","svelte-zmcd92"),e[28].initiativeDie===void 0&&le(gt),f(Le,"class","svelte-zmcd92"),f(ne,"type","number"),f(ne,"min","0"),f(ne,"max","10"),f(ne,"class","svelte-zmcd92"),f(Be,"class","svelte-zmcd92"),f(ye,"class","highlighted svelte-zmcd92"),f(ze,"colspan","5"),f(ze,"class","svelte-zmcd92"),f(Y,"class","base-attacks svelte-zmcd92"),Ne(Y,"dead",!e[28].alive),this.first=n},m(j,O){P(j,n,O),o(n,l),o(l,s),o(n,r),o(n,g),e[28].name!==void 0&&(g.textContent=e[28].name),o(n,m),o(n,p),o(p,b),e[28].info!==void 0&&(b.textContent=e[28].info),o(p,C),V&&V.m(p,null),o(n,z),o(n,S),e[28].target!==void 0&&(S.textContent=e[28].target),o(n,v),o(n,a),e[28].status!==void 0&&(a.textContent=e[28].status),o(n,N),o(n,D),o(D,L),J(L,e[28].hp),o(n,M),o(n,R),o(R,k),J(k,e[28].ac),o(n,y),o(n,B),o(B,I),J(I,e[28].dexBonus),P(j,U,O),P(j,H,O),o(H,x),o(H,Z),o(H,W),o(H,u),o(H,d),o(H,c),o(H,_),o(_,E),o(_,he),o(_,ve),o(_,Te),o(_,Q),o(Q,We),o(_,ot),o(_,Ee),P(j,Ge,O),P(j,Y,O),o(Y,Xe),o(Y,rt),o(Y,Le),o(Le,oe);for(let _e=0;_e<q.length;_e+=1)q[_e]&&q[_e].m(oe,null);de(oe,e[28].initiativeDie,!0),o(Y,ut),o(Y,Be),o(Be,ne),J(ne,e[28].initiativeSeg),o(Y,ct),o(Y,ze),o(ze,ye),P(j,Je,O),K&&K.m(j,O),P(j,Ie,O),qe||(at=[T(g,"input",ft),T(b,"input",dt),T(S,"input",ht),T(a,"input",_t),T(L,"input",on),T(k,"input",rn),T(I,"input",un),T(E,"click",cn),T(ve,"click",an),T(Q,"click",fn),T(Ee,"click",dn),T(oe,"change",gt),T(ne,"input",hn),T(ye,"click",_n)],qe=!0)},p(j,O){var _e,vt;if(e=j,O[0]&1&&i!==(i=e[28].number+"")&&ce(s,i),O[0]&1&&e[28].name!==g.textContent&&(g.textContent=e[28].name),O[0]&1&&e[28].info!==b.textContent&&(b.textContent=e[28].info),O[0]&1&&(w=(_e=e[28].info)==null?void 0:_e.startsWith("http")),w?V?V.p(e,O):(V=yt(e),V.c(),V.m(p,null)):V&&(V.d(1),V=null),O[0]&1&&e[28].target!==S.textContent&&(S.textContent=e[28].target),O[0]&1&&e[28].status!==a.textContent&&(a.textContent=e[28].status),O[0]&1&&se(L.value)!==e[28].hp&&J(L,e[28].hp),O[0]&1&&se(k.value)!==e[28].ac&&J(k,e[28].ac),O[0]&1&&se(I.value)!==e[28].dexBonus&&J(I,e[28].dexBonus),O[0]&1&&Ne(n,"dead",!e[28].alive),O[0]&1&&re!==(re=e[28].alive?"Mark Dead":"Mark Alive")&&ce(We,re),O&0){be=ee(Object.values(ae));let $;for($=0;$<be.length;$+=1){const bt=zt(e,be,$);q[$]?q[$].p(bt,O):(q[$]=It(bt),q[$].c(),q[$].m(oe,null))}for(;$<q.length;$+=1)q[$].d(1);q.length=be.length}O[0]&1&&de(oe,e[28].initiativeDie),O[0]&1&&se(ne.value)!==e[28].initiativeSeg&&J(ne,e[28].initiativeSeg),O[0]&1&&Ne(Y,"dead",!e[28].alive),(vt=e[28].extraAttacks)!=null&&vt.length?K?K.p(e,O):(K=Dt(e),K.c(),K.m(Ie.parentNode,Ie)):K&&(K.d(1),K=null)},d(j){j&&(F(n),F(U),F(H),F(Ge),F(Y),F(Je),F(Ie)),V&&V.d(),Ze(q,j),K&&K.d(j),qe=!1,ie(at)}}}function Tt(t){let e,n,l;return{c(){e=h("button"),e.textContent="Next Round",f(e,"class","next highlighted svelte-zmcd92")},m(i,s){P(i,e,s),n||(l=T(e,"click",t[26]),n=!0)},p:fe,d(i){i&&F(e),n=!1,l()}}}function il(t){let e,n,l,i=t[0].roundNumber+"",s,r,g,m,p,b,C,w,z,S,v,a,N,D=[],L=new Map,M,R,k,y,B,I,U,H,x,Z,W=ee(t[0].monsters);const u=c=>c[28].number;for(let c=0;c<W.length;c+=1){let _=At(t,W,c),E=u(_);L.set(E,D[c]=Ot(E,_))}let d=t[1]&&Tt(t);return{c(){e=h("section"),n=h("h2"),l=X("Round "),s=X(i),r=A(),g=h("label"),m=X("Sort by: "),p=h("select"),b=h("option"),b.textContent="Monster #",C=h("option"),C.textContent="Name",w=h("option"),w.textContent="Earliest Initiative Segment",z=A(),S=h("table"),v=h("thead"),v.innerHTML='<tr><th class="svelte-zmcd92">Monster #</th> <th class="svelte-zmcd92">Name</th> <th class="svelte-zmcd92">Info</th> <th class="svelte-zmcd92">Target</th> <th class="svelte-zmcd92">Status</th> <th class="svelte-zmcd92">HP</th> <th class="svelte-zmcd92">AC</th> <th class="svelte-zmcd92">Dex Bonus</th></tr>',a=A(),N=h("tbody");for(let c=0;c<D.length;c+=1)D[c].c();M=A(),R=h("div"),k=h("button"),k.textContent="Add New Monster",y=A(),B=h("button"),B.textContent="Roll All Initiatives",I=A(),d&&d.c(),U=A(),H=h("hr"),b.__value="number",J(b,b.__value),C.__value="name",J(C,C.__value),w.__value="seg",J(w,w.__value),t[2]===void 0&&le(()=>t[5].call(p)),f(v,"class","svelte-zmcd92"),f(N,"class","svelte-zmcd92"),f(S,"class","svelte-zmcd92"),f(B,"class","highlighted"),f(R,"class","buttons svelte-zmcd92"),f(e,"class","round"),f(H,"class","svelte-zmcd92")},m(c,_){P(c,e,_),o(e,n),o(n,l),o(n,s),o(e,r),o(e,g),o(g,m),o(g,p),o(p,b),o(p,C),o(p,w),de(p,t[2],!0),o(e,z),o(e,S),o(S,v),o(S,a),o(S,N);for(let E=0;E<D.length;E+=1)D[E]&&D[E].m(N,null);o(e,M),o(e,R),o(R,k),o(R,y),o(R,B),o(R,I),d&&d.m(R,null),P(c,U,_),P(c,H,_),x||(Z=[T(p,"change",t[5]),T(p,"change",t[6]),T(k,"click",t[24]),T(B,"click",t[25])],x=!0)},p(c,_){_[0]&1&&i!==(i=c[0].roundNumber+"")&&ce(s,i),_[0]&4&&de(p,c[2]),_[0]&17&&(W=ee(c[0].monsters),D=qt(D,_,u,1,c,W,L,N,Jt,Ot,null,At)),c[1]?d?d.p(c,_):(d=Tt(c),d.c(),d.m(R,null)):d&&(d.d(1),d=null)},i:fe,o:fe,d(c){c&&(F(e),F(U),F(H));for(let _=0;_<D.length;_+=1)D[_].d();d&&d.d(),x=!1,ie(Z)}}}function sl(t,e,n){let{round:l}=e,{current:i}=e,s;const r=wn(),g=new ll;function m({initiativeDie:u,dexBonus:d}){if(u===ae.NONE)return;const _=g.die(parseInt(u.slice(1)))-d;return _<0?0:_>10?10:_}function p(){s=Fe(this),n(2,s)}const b=()=>{switch(s){case"number":n(0,l.monsters=l.monsters.sort((u,d)=>u.number-d.number),l);break;case"name":n(0,l.monsters=l.monsters.sort((u,d)=>{const c=u.name.toUpperCase(),_=d.name.toUpperCase();return c<_?-1:c>_?1:0}),l);break;case"seg":n(0,l.monsters=l.monsters.sort((u,d)=>{var c,_;if((c=u.extraAttacks)!=null&&c.length||(_=d.extraAttacks)!=null&&_.length){const he=[u.initiativeSeg,...u.extraAttacks.map(Q=>Q.initiativeSeg)].sort((Q,re)=>Q-re)[0],Te=[d.initiativeSeg,...d.extraAttacks.map(Q=>Q.initiativeSeg)].sort((Q,re)=>Q-re)[0];return he-Te}return u.initiativeSeg-d.initiativeSeg}),l);break}};function C(u,d){u[d].name=this.textContent,n(0,l)}function w(u,d){u[d].info=this.textContent,n(0,l)}function z(u,d){u[d].target=this.textContent,n(0,l)}function S(u,d){u[d].status=this.textContent,n(0,l)}function v(u,d){u[d].hp=se(this.value),n(0,l)}function a(u,d){u[d].ac=se(this.value),n(0,l)}function N(u,d){u[d].dexBonus=se(this.value),n(0,l)}const D=(u,d,c)=>{n(0,d[c].extraAttacks=[...u.extraAttacks,{initiativeDie:ae.NONE}],l)},L=u=>{n(0,l.monsters=l.monsters.filter(({number:d})=>d!==u.number),l)},M=(u,d,c)=>{n(0,d[c].alive=!u.alive,l)},R=u=>{var c;const d={...u,number:l.monsters.length+1,alive:!0,initiativeSeg:void 0,extraAttacks:(c=u.extraAttacks)==null?void 0:c.map(_=>({..._,initiativeSeg:void 0}))};n(0,l.monsters=[...l.monsters,d],l)};function k(u,d){u[d].initiativeDie=Fe(this),n(0,l)}function y(u,d){u[d].initiativeSeg=se(this.value),n(0,l)}const B=(u,d,c)=>{n(0,d[c].initiativeSeg=m({initiativeDie:u.initiativeDie,dexBonus:u.dexBonus}),l)};function I(u,d){u[d].initiativeDie=Fe(this),n(0,l)}function U(u,d){u[d].initiativeSeg=se(this.value),n(0,l)}const H=(u,d,c,_)=>{n(0,c[_].initiativeSeg=m({initiativeDie:u.initiativeDie,dexBonus:d.dexBonus}),l)},x=()=>{const u={number:l.monsters.length+1,alive:!0,name:"",target:"",initiativeDie:ae.NONE,dexBonus:0,extraAttacks:[],status:"",info:""};n(0,l.monsters=[...l.monsters,u],l)},Z=()=>{n(0,l.monsters=l.monsters.map(u=>{var d;return{...u,initiativeSeg:m({initiativeDie:u.initiativeDie,dexBonus:u.dexBonus}),extraAttacks:(d=u.extraAttacks)==null?void 0:d.map(c=>({...c,initiativeSeg:m({initiativeDie:c.initiativeDie,dexBonus:u.dexBonus})}))}}),l)},W=()=>{const u={roundNumber:l.roundNumber+1,monsters:l.monsters.map(d=>({...d,initiativeSeg:void 0,extraAttacks:d.extraAttacks.map(c=>({...c,initiativeSeg:void 0}))})).sort((d,c)=>d.number-c.number)};r("next",u)};return t.$$set=u=>{"round"in u&&n(0,l=u.round),"current"in u&&n(1,i=u.current)},[l,i,s,r,m,p,b,C,w,z,S,v,a,N,D,L,M,R,k,y,B,I,U,H,x,Z,W]}class ol extends Yt{constructor(e){super(),Qt(this,e,sl,il,Ht,{round:0,current:1},null,[-1,-1])}}function Lt(t,e,n){const l=t.slice();return l[13]=e[n],l[14]=e,l[15]=n,l}function Bt(t,e,n){const l=t.slice();return l[16]=e[n],l}function Ft(t){let e,n,l,i=[],s=new Map,r,g,m,p,b,C,w,z=ee(t[1]);const S=v=>v[16].title;for(let v=0;v<z.length;v+=1){let a=Bt(t,z,v),N=S(a);s.set(N,i[v]=Pt(N,a))}return{c(){e=h("label"),n=X(`Saved Combats:
      `),l=h("select");for(let v=0;v<i.length;v+=1)i[v].c();r=A(),g=h("div"),m=h("button"),m.textContent="Delete",p=A(),b=h("button"),b.textContent="Load Saved Combat",f(l,"class","svelte-leuxtg"),t[2]===void 0&&le(()=>t[7].call(l)),f(e,"class","svelte-leuxtg"),f(m,"class","delete"),f(b,"class","load"),f(g,"class","saved-buttons svelte-leuxtg")},m(v,a){P(v,e,a),o(e,n),o(e,l);for(let N=0;N<i.length;N+=1)i[N]&&i[N].m(l,null);de(l,t[2],!0),P(v,r,a),P(v,g,a),o(g,m),o(g,p),o(g,b),C||(w=[T(l,"change",t[7]),T(m,"click",t[8]),T(b,"click",t[9])],C=!0)},p(v,a){a&2&&(z=ee(v[1]),i=qt(i,a,S,1,v,z,s,l,Jt,Pt,null,Bt)),a&6&&de(l,v[2])},d(v){v&&(F(e),F(r),F(g));for(let a=0;a<i.length;a+=1)i[a].d();C=!1,ie(w)}}}function Pt(t,e){let n,l=e[16].title+"",i,s;return{key:t,first:null,c(){n=h("option"),i=X(l),n.__value=s=e[16],J(n,n.__value),this.first=n},m(r,g){P(r,n,g),o(n,i)},p(r,g){e=r,g&2&&l!==(l=e[16].title+"")&&ce(i,l),g&2&&s!==(s=e[16])&&(n.__value=s,J(n,n.__value))},d(r){r&&F(n)}}}function Ut(t){let e,n,l;function i(r){t[10](r,t[13],t[14],t[15])}let s={current:t[13].roundNumber===t[0].currentRoundNumber};return t[13]!==void 0&&(s.round=t[13]),e=new ol({props:s}),Qe.push(()=>In(e,"round",i)),e.$on("next",t[11]),{c(){Dn(e.$$.fragment)},m(r,g){Vt(e,r,g),l=!0},p(r,g){t=r;const m={};g&1&&(m.current=t[13].roundNumber===t[0].currentRoundNumber),!n&&g&1&&(n=!0,m.round=t[13],An(()=>n=!1)),e.$set(m)},i(r){l||(Ce(e.$$.fragment,r),l=!0)},o(r){$e(e.$$.fragment,r),l=!1},d(r){Kt(e,r)}}}function rl(t){let e,n,l,i=t[3]?` - ${t[3]}`:"",s,r,g=t[0].currentRoundNumber+"",m,p,b,C,w,z,S,v,a,N,D,L=(t[3]??"Not saved")+"",M,R,k=(t[4]??"N/A")+"",y,B,I,U,H,x,Z=t[1].length&&Ft(t),W=ee(t[0].roundsData),u=[];for(let c=0;c<W.length;c+=1)u[c]=Ut(Lt(t,W,c));const d=c=>$e(u[c],1,1,()=>{u[c]=null});return{c(){e=h("header"),n=h("h1"),l=X("Initiative Tracker"),s=X(i),r=X(" - Round: "),m=X(g),p=A(),b=h("button"),b.textContent="Save Combat",C=A(),w=h("main"),Z&&Z.c(),z=A();for(let c=0;c<u.length;c+=1)u[c].c();S=A(),v=h("footer"),a=h("p"),N=h("strong"),N.textContent="Last saved as:",D=A(),M=X(L),R=X(" - Round: "),y=X(k),B=A(),I=h("button"),I.textContent="Save Combat",f(n,"class","svelte-leuxtg"),f(b,"class","save highlighted svelte-leuxtg"),f(e,"class","svelte-leuxtg"),f(a,"class","svelte-leuxtg"),f(I,"class","save highlighted svelte-leuxtg"),f(v,"class","svelte-leuxtg")},m(c,_){P(c,e,_),o(e,n),o(n,l),o(n,s),o(n,r),o(n,m),o(e,p),o(e,b),P(c,C,_),P(c,w,_),Z&&Z.m(w,null),o(w,z);for(let E=0;E<u.length;E+=1)u[E]&&u[E].m(w,null);P(c,S,_),P(c,v,_),o(v,a),o(a,N),o(a,D),o(a,M),o(a,R),o(a,y),o(v,B),o(v,I),U=!0,H||(x=[T(b,"click",t[6]),T(I,"click",t[12])],H=!0)},p(c,[_]){if((!U||_&8)&&i!==(i=c[3]?` - ${c[3]}`:"")&&ce(s,i),(!U||_&1)&&g!==(g=c[0].currentRoundNumber+"")&&ce(m,g),c[1].length?Z?Z.p(c,_):(Z=Ft(c),Z.c(),Z.m(w,z)):Z&&(Z.d(1),Z=null),_&1){W=ee(c[0].roundsData);let E;for(E=0;E<W.length;E+=1){const he=Lt(c,W,E);u[E]?(u[E].p(he,_),Ce(u[E],1)):(u[E]=Ut(he),u[E].c(),Ce(u[E],1),u[E].m(w,null))}for(zn(),E=W.length;E<u.length;E+=1)d(E);yn()}(!U||_&8)&&L!==(L=(c[3]??"Not saved")+"")&&ce(M,L),(!U||_&16)&&k!==(k=(c[4]??"N/A")+"")&&ce(y,k)},i(c){if(!U){for(let _=0;_<W.length;_+=1)Ce(u[_]);U=!0}},o(c){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)$e(u[_]);U=!1},d(c){c&&(F(e),F(C),F(w),F(S),F(v)),Z&&Z.d(),Ze(u,c),H=!1,ie(x)}}}function ul(t,e,n){let l={currentRoundNumber:1,roundsData:[{roundNumber:1,monsters:[{number:1,alive:!0,name:"",target:"",initiativeDie:ae.NONE,dexBonus:0,extraAttacks:[],status:"",info:""}]}]},i=[],s,r,g;function m(){const a=[];for(let N=0;N<localStorage.length;N++){if(console.log(localStorage.key(N)),localStorage.key(N)==="admin")continue;const D=JSON.parse(localStorage.getItem(localStorage.key(N)));a.push({title:localStorage.key(N),combat:D})}n(1,i=a)}kn(()=>{m()});const p=()=>{const a=window.prompt("Save As:",r);!a||!a.length||(localStorage.setItem(a,JSON.stringify(l)),n(3,r=a),n(4,g=l.currentRoundNumber),m(),n(2,s=i.find(N=>N.title===a)))};function b(){s=Fe(this),n(2,s),n(1,i)}const C=()=>{localStorage.removeItem(s.title),n(3,r=void 0),n(4,g=void 0),m()},w=()=>{n(0,l=s.combat),n(3,r=s.title),n(4,g=s.combat.currentRoundNumber)};function z(a,N,D,L){D[L]=a,n(0,l)}return[l,i,s,r,g,m,p,b,C,w,z,a=>{n(0,l.roundsData=[...l.roundsData,a.detail],l),n(0,l.currentRoundNumber=a.detail.roundNumber,l)},()=>{const a=window.prompt("Save As:",r);!a||!a.length||(localStorage.setItem(a,JSON.stringify(l)),n(3,r=a),n(4,g=l.currentRoundNumber),m(),n(2,s=i.find(N=>N.title===a)))}]}class cl extends Yt{constructor(e){super(),Qt(this,e,ul,rl,Ht,{})}}new cl({target:document.getElementById("app")});
